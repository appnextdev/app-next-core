System.register("handlers/data",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("AppNextDataEvents",class{set onCancel(e){this.cancel=e}set onData(e){this.data=e}set onError(e){this.error=e}set onPending(e){this.pending=e}set onReady(e){this.ready=e}invokeCancelEvent(e){try{this.cancel&&this.cancel(e)}catch(e){this.invokeErrorEvent(e)}}invokeDataEvent(e){try{this.data&&this.data(e)}catch(e){this.invokeErrorEvent(e)}}invokeErrorEvent(e){this.error&&this.error(e)}invokePendingEvent(){try{this.pending&&this.pending()}catch(e){this.invokeErrorEvent(e)}}invokeReadyEvent(){try{this.ready&&this.ready()}catch(e){this.invokeErrorEvent(e)}}})}}}),System.register("handlers/error",[],function(e,t){"use strict";var r,n;t&&t.id;return e("error",function(e){const t=n[r[e]];if(!t)return new Error;const s=new Error(t.message);return s.name=t.name,s}),{setters:[],execute:function(){!function(e){e[e.acceptNotSupported=0]="acceptNotSupported",e[e.captureNotSupported=1]="captureNotSupported",e[e.featureTerminated=2]="featureTerminated",e[e.permissionDenied=3]="permissionDenied"}(r||(r={})),e("Errors",r),n={acceptNotSupported:{name:"accept not supported",message:'Input element "accept" attribute is not supported by this device'},captureNotSupported:{name:"capture not supported",message:'Input element "capture" attribute is not supported by this device'},featureTerminated:{name:"feature terminated",message:"Current feature terminated due to user action"},permissionDenied:{name:"permission denied",message:"Requested permission denied by user"}}}}}),System.register("providers/permission",["handlers/data","handlers/error"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){e("AppNextPermissionProvider",class extends r.AppNextDataEvents{constructor(e){super(),this.name=e}register(){function e(e){try{switch(e.state){case"granted":return t.invokeReadyEvent();case"prompt":return t.invokePendingEvent();case"denied":return t.invokeCancelEvent(n.error(n.Errors.permissionDenied))}}catch(e){t.invokeErrorEvent(e)}}const t=this;return navigator.permissions.query({name:this.name}).then(t=>{e(t),t.onchange=(()=>e(t))})}})}}}),System.register("handlers/watch",["handlers/data"],function(e,t){"use strict";var r;t&&t.id;return{setters:[function(e){r=e}],execute:function(){e("AppNextWatch",class extends r.AppNextDataEvents{})}}}),System.register("providers/geolocation",["providers/permission","handlers/watch","handlers/error"],function(e,t){"use strict";var r,n,s;t&&t.id;return{setters:[function(e){r=e},function(e){n=e},function(e){s=e}],execute:function(){e("AppNextGeoLocationProvider",class extends n.AppNextWatch{constructor(e){super(),this.options=e,this.permission=new r.AppNextPermissionProvider("geolocation"),this.permission.onCancel=(e=>this.invokeCancelEvent(e)),this.permission.onError=(e=>this.invokeErrorEvent(e)),this.permission.onPending=(()=>this.invokePendingEvent())}request(){return this.permission.register()}start(){var e=!0;this.id=navigator.geolocation.watchPosition(t=>{e&&(e=!1,this.invokeReadyEvent()),this.invokeDataEvent(t)},t=>{e?this.invokeCancelEvent(new Error(t.message)):this.invokeErrorEvent(new Error(t.message))},this.options||{})}stop(){try{if(!this.id)return;navigator.geolocation.clearWatch(this.id),this.id=null,this.invokeCancelEvent(s.error(s.Errors.featureTerminated))}catch(e){this.invokeErrorEvent(e)}}})}}}),System.register("core",["providers/geolocation"],function(e,t){"use strict";var r,n;t&&t.id;return e("config",function(e){return(n.config||{})[e]||{}}),{setters:[function(e){r=e}],execute:function(){e("AppNextCore",n=class e{constructor(){this.providers={geolocation:e=>new r.AppNextGeoLocationProvider(e)}}config(t){e.config=t}})}}}),System.register("elements/base",["core","handlers/data"],function(e,t){"use strict";var r,n,s;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){s=class{constructor(e){this.support={attribute:(e,t)=>{const r=document.createElement(e);return r.setAttribute(t,!0),!!r[t]}},this.container=e}attribute(e,t){switch(arguments.length){case 1:return this.container.getAttribute(e);case 2:this.container.setAttribute(e,t)}}config(){return r.config(this.attribute("config"))}element(e){const t=document.createElement(e);return this.container.attachShadow({mode:"open"}),this.container.shadowRoot.append(t),t}reset(){this.container.innerHTML=""}},e("AppNextCustomElement",class extends HTMLElement{constructor(){super(),this.events=new n.AppNextDataEvents,this.utils=new s(this)}})}}}),System.register("elements/media-picker",["elements/base","handlers/error"],function(e,t){"use strict";var r,n;t&&t.id;return{setters:[function(e){r=e},function(e){n=e}],execute:function(){e("AppNextMediaPicker",class extends r.AppNextCustomElement{render(){this.utils.reset();const e=this.utils.config(),t=this.utils.element("input"),r=this.utils.attribute("type"),s=this.utils.attribute("single"),i=this.utils.attribute("source");this.events.onCancel=e.oncancel,this.events.onData=e.onmedia,this.events.onError=e.onerror,this.events.onReady=e.onready;try{i&&(this.utils.support.attribute("input","capture")?t.capture="auto"==i?"":i:this.events.invokeCancelEvent(n.error(n.Errors.captureNotSupported))),r&&(this.utils.support.attribute("input","accept")?t.accept=r+"/*":this.events.invokeCancelEvent(n.error(n.Errors.acceptNotSupported))),t.multiple=null==s||null==s||""!=s,t.onchange=(()=>this.events.invokeDataEvent(t.files)),t.type="file",this.events.invokeReadyEvent()}catch(e){this.events.invokeErrorEvent(e)}}})}}}),System.register("setup",["elements/media-picker"],function(e,t){"use strict";var r,n,s;t&&t.id;return{setters:[function(e){r=e}],execute:function(){n=class{constructor(){this.registry={},this.register("media-picker",r.AppNextMediaPicker)}register(e,t){customElements&&!this.registry[e]&&(customElements.define(e,t),this.registry[e]=t)}},s=class{custom(e){e.forEach(e=>this.render(document.querySelectorAll(e)))}render(e=document.querySelectorAll("*")){e.forEach(e=>{e.render instanceof Function&&e.render()})}},e("AppNextSetup",class{constructor(){const e=new n;this.renderer=new s,addEventListener("load",()=>{this.renderer.custom(Object.keys(e.registry))})}render(e){this.renderer.render(e)}})}}});